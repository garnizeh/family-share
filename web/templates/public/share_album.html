{{define "share_album.html"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Album.Title}} - FamilyShare</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    <nav style="background: var(--color-gray-800); color: white; padding: var(--space-4);">
        <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; gap: var(--space-3);">
            <span style="font-size: 1.5rem;">ðŸ“¸</span>
            <h1 style="font-size: var(--font-size-lg); margin: 0;">FamilyShare</h1>
        </div>
    </nav>

    <main id="main-content" style="max-width: 1200px; margin: 0 auto; padding: var(--space-6);"
        x-data="{ lightboxOpen: false, lightboxSrc: '', lightboxFilename: '' }">

        <header style="margin-bottom: var(--space-8); text-align: center;">
            <h1 style="font-size: var(--font-size-3xl); color: var(--color-gray-900); margin-bottom: var(--space-2);">
                {{.Album.Title}}
            </h1>
            {{if .Album.Description.Valid}}
            <p style="font-size: var(--font-size-lg); color: var(--color-gray-600); max-width: 600px; margin: 0 auto;">
                {{.Album.Description.String}}
            </p>
            {{end}}
            <p style="font-size: var(--font-size-sm); color: var(--color-gray-500); margin-top: var(--space-3);">
                ðŸ“· {{len .Photos}} {{if eq (len .Photos) 1}}photo{{else}}photos{{end}}
            </p>
        </header>

        {{if .Photos}}
        <section>
            <div class="grid-photos">
                {{range .Photos}}
                <div class="card card-photo">
                    <img src="/data/photos/{{.ID}}.webp" alt="{{.Filename}}" class="card-photo-preview" loading="lazy"
                        @click="lightboxSrc = '/data/photos/{{.ID}}.webp'; lightboxFilename = '{{.Filename}}'; lightboxOpen = true"
                        style="cursor: pointer;">
                    <div class="card-photo-info">
                        <p class="text-xs text-muted mb-0">{{.Filename}}</p>
                    </div>
                </div>
                {{end}}
            </div>
        </section>
        {{else}}
        <div class="empty-state">
            <div class="empty-state-icon">ðŸ“·</div>
            <h3 class="empty-state-title">No Photos Yet</h3>
            <p class="empty-state-description">
                This album doesn't have any photos yet.
            </p>
        </div>
        {{end}}

        <!-- Photo Lightbox Modal -->
        <div class="modal" x-show="lightboxOpen" @click.self="lightboxOpen = false"
            @keydown.escape.window="lightboxOpen = false" style="display: none;" x-cloak>
            <div class="modal-backdrop" @click="lightboxOpen = false" style="background: rgba(0, 0, 0, 0.95);"></div>
            <div style="position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; z-index: 1001; padding: var(--space-4);"
                @click.stop>
                <button @click="lightboxOpen = false"
                    style="position: absolute; top: var(--space-4); right: var(--space-4); background: rgba(0, 0, 0, 0.7); color: white; border: none; font-size: 2rem; width: 3rem; height: 3rem; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 1002;"
                    title="Close (Esc)">&times;</button>
                <div style="max-width: 95vw; max-height: 95vh; display: flex; flex-direction: column; align-items: center;"
                    @click.stop>
                    <img :src="lightboxSrc" :alt="lightboxFilename"
                        style="max-width: 100%; max-height: 90vh; object-fit: contain; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-xl);">
                    <p x-text="lightboxFilename"
                        style="color: white; margin-top: var(--space-4); font-size: var(--font-size-sm); background: rgba(0, 0, 0, 0.7); padding: var(--space-2) var(--space-4); border-radius: var(--border-radius);">
                    </p>
                </div>
            </div>
        </div>
    </main>

    <footer
        style="background: var(--color-gray-100); padding: var(--space-6); margin-top: var(--space-12); text-align: center;">
        <p style="color: var(--color-gray-600); font-size: var(--font-size-sm); margin: 0;">
            Shared via FamilyShare ðŸ“¸
        </p>
    </footer>
</body>

</html>
{{end}}