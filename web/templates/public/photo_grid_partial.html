{{define "photo_grid_partial.html"}}
{{range .Photos}}
<div class="card card-photo">
    <img src="/data/photos/{{.ID}}.webp" alt="{{.Filename}}" class="card-photo-preview" loading="lazy"
        @click="lightboxSrc = '/data/photos/{{.ID}}.webp'; lightboxFilename = '{{.Filename}}'; lightboxOpen = true"
        style="cursor: pointer;">
    <div class="card-photo-info">
        <p class="text-xs text-muted mb-0">{{.Filename}}</p>
    </div>
</div>
{{end}}

{{if .HasMore}}
<!-- Replace the Load More button with updated page -->
<div id="load-more-container" hx-swap-oob="true"
    style="display: flex; justify-content: center; margin-top: var(--space-8);">
    <button class="btn btn-secondary" hx-get="/s/{{.Token}}?page={{.NextPage}}" hx-target="#photo-grid"
        hx-swap="beforeend" hx-indicator="#loading-spinner" style="position: relative;">
        <span id="load-more-text">Load More Photos</span>
        <span id="loading-spinner" class="htmx-indicator" style="margin-left: var(--space-2);">
            <span
                style="display: inline-block; width: 1rem; height: 1rem; border: 2px solid currentColor; border-top-color: transparent; border-radius: 50%; animation: spin 0.6s linear infinite;"></span>
        </span>
    </button>
</div>
{{else}}
<!-- Remove the Load More button when no more photos -->
<div id="load-more-container" hx-swap-oob="true" style="display: none;"></div>
{{end}}
{{end}}