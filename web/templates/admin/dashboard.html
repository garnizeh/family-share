{{define "admin_dashboard.html"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - FamilyShare Admin</title>
    <link rel="stylesheet" href="/static/styles.css">
    {{template "csrf_head.html" .}}
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    {{template "admin_nav.html" .}}

    <main id="main-content" class="admin-content">
        <h1 class="page-title">Dashboard</h1>

        <div class="dashboard-grid">
            <div class="card">
                <div class="card-body">
                    <h2 class="card-title">Albums</h2>
                    <p class="stat-number">{{.AlbumCount}}</p>
                    <a href="/admin/albums" class="btn btn-primary">Manage Albums</a>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h2 class="card-title">Photos</h2>
                    <p class="stat-number">{{.PhotoCount}}</p>
                    <p class="text-muted mb-0">Across all albums</p>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h2 class="card-title">Storage</h2>
                    <p class="stat-number">{{printf "%.2f" .StorageMB}} <span class="text-muted"
                            style="font-size: 1rem;">MB</span></p>
                    <p class="text-muted mb-0">Total storage used</p>
                </div>
            </div>
        </div>

        {{if .Stats}}
        <div class="mt-8">
            <h2 class="text-2xl font-semibold mb-4">Activity Metrics</h2>

            <div class="dashboard-grid">
                <!-- Uploads -->
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Uploads (7 Days)</h3>
                        <p class="stat-number">{{.Stats.Uploads7Days}}</p>
                        <p class="text-muted mb-0">Recent uploads</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Uploads (30 Days)</h3>
                        <p class="stat-number">{{.Stats.Uploads30Days}}</p>
                        <p class="text-muted mb-0">Monthly uploads</p>
                    </div>
                </div>

                <!-- Album Views -->
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Album Views (7 Days)</h3>
                        <p class="stat-number">{{.Stats.AlbumViews7Days}}</p>
                        <p class="text-muted mb-0">Recent views</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Album Views (30 Days)</h3>
                        <p class="stat-number">{{.Stats.AlbumViews30Days}}</p>
                        <p class="text-muted mb-0">Monthly views</p>
                    </div>
                </div>

                <!-- Share Link Hits -->
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Share Hits (7 Days)</h3>
                        <p class="stat-number">{{.Stats.ShareViews7Days}}</p>
                        <p class="text-muted mb-0">Recent share views</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">Share Hits (30 Days)</h3>
                        <p class="stat-number">{{.Stats.ShareViews30Days}}</p>
                        <p class="text-muted mb-0">Monthly share views</p>
                    </div>
                </div>
            </div>
        </div>
        {{end}}

        {{if not .HasAlbums}}
        <div class="empty-state mt-8">
            <div class="empty-state-icon">ðŸŽ‰</div>
            <h2 class="empty-state-title">Welcome to FamilyShare!</h2>
            <p class="empty-state-description">
                Start by creating your first album and uploading photos to share with your family.
            </p>
            <a href="/admin/albums?action=create" class="btn btn-primary btn-lg">Create Your First Album</a>
        </div>
        {{end}}
    </main>
</body>

</html>
{{end}}