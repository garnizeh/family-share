# FamilyShare VPS Production Environment
# Copy this file to .env and configure for your VPS deployment

# ============================================
# Server Configuration
# ============================================

# Address server listens on (Docker internal)
SERVER_ADDR=:8080

# Path to SQLite database file
DATABASE_PATH=/app/data/familyshare.db

# Base directory for stored photos
DATA_DIR=/app/data

# Temporary upload directory
TEMP_UPLOAD_DIR=/app/tmp_uploads

# ============================================
# Application Settings
# ============================================

# App environment (production recommended)
APP_ENV=production

# Output image format: webp (faster) or avif (smaller, slower)
IMAGE_FORMAT=webp

# Debug logging (set to false in production)
DEBUG=false

# ============================================
# Security Settings (CRITICAL)
# ============================================

# Admin password hash - REQUIRED
# Generate with: go run scripts/hash_password.go YourSecurePassword123
# Or: make hash-password PASSWORD=YourSecurePassword123
ADMIN_PASSWORD_HASH="PASTE_YOUR_BCRYPT_HASH_HERE"

# CSRF protection secret - REQUIRED
# Generate with: openssl rand -hex 32
CSRF_SECRET="GENERATE_A_RANDOM_SECRET_HERE"

# Viewer hash secret for share link view counting - REQUIRED
# Generate with: openssl rand -hex 32
VIEWER_HASH_SECRET="GENERATE_ANOTHER_RANDOM_SECRET_HERE"

# Enforce viewer hash secret (recommended for production)
VIEWER_HASH_SECRET_REQUIRED=true

# Force HTTPS cookie flags (set to true if behind HTTPS proxy/Caddy)
FORCE_HTTPS=true

# Cookie SameSite policy (Lax recommended)
COOKIE_SAMESITE=Lax

# ============================================
# Rate Limiting
# ============================================

# Public share link rate limit (requests per minute)
RATE_LIMIT_SHARE=60

# Admin area rate limit (requests per minute)
RATE_LIMIT_ADMIN=10

# ============================================
# Reverse Proxy Settings
# ============================================

# Trusted proxy CIDRs for honoring X-Forwarded-For headers
# Docker default bridge network
TRUSTED_PROXY_CIDRS=172.16.0.0/12

# Or use predefined: cloudflare, private
# TRUSTED_PROXY_CIDRS=cloudflare

# ============================================
# Caddy/Domain Settings (for docker-compose)
# ============================================

# Your domain name
DOMAIN=photos.yourdomain.com

# Email for Let's Encrypt SSL certificates
ACME_EMAIL=your-email@example.com

# ============================================
# Performance Tuning (Optional)
# ============================================

# Max concurrent uploads (not implemented yet)
# MAX_CONCURRENT_UPLOADS=3

# Photo resize quality (webp: 60-90, avif: 50-70)
# PHOTO_QUALITY=80

# ============================================
# Notes
# ============================================

# 1. NEVER commit this file with real secrets to git
# 2. Generate strong random secrets for CSRF_SECRET and VIEWER_HASH_SECRET
# 3. Use a strong admin password (20+ characters)
# 4. Update DOMAIN and ACME_EMAIL before deployment
# 5. Set FORCE_HTTPS=true when behind Caddy/nginx with HTTPS
